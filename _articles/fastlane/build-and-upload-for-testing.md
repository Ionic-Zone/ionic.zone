## Ionic + Fastlane: Build and upload your Cordova apps for testing

Now that we have both iOS and Android correctly configured and connected it is a good time to actually do something with our Ionic project: build a development version and upload it for testing.

To build we will leverage the Fastfile for the first time.

For iOS our goal is to build the app and then upload it to Testflight.
For Android we will..

### iOS to Testflight

With normal Xcode projects uploading to Testflight via `fastlane` is so easy, that it is one of the templates generated in the Fastfile:

```
  desc "Submit a new Beta Build to Apple TestFlight"
  desc "This will also make sure the profile is up to date"
  lane :beta do
    # match(type: "appstore") # more information: https://codesigning.guide
    gym # Build your app - more options available
    pilot

    # sh "your_script.sh"
    # You can also use other beta testing services here (run `fastlane actions`)
  end
```

This defines a `beta` lane, that uses `match` to take care of certificates (commented out right by default because not all people want to use that, we do!), then `gym` to build the app and finally `pilot` to upload to Testflight.

Unfortunately the default Xcode project file generated by Cordova is not ready for this. If you built an iOS app manually before, you know that by default the codesigning is not set and has to be edited manually in Xcode. Same for build numbering. This of course won't work for this automated process, so we have to do additional things in our lane to fix this. 

When we try to do this however we will see that the xcodeproj file generated by Cordova is too old for the current tools. To fix this you can either open the project once in Xcode which will upgrade it to a more recent version. Or you can install a fastlane plugin and use this lane:

```
desc "Upgrade the Cordova project to Xcode 8"
	lane :upgrade_xcode do
        ... bla upgrade xcode to 8
end
```

Then run `fastlane ios upgrade_xcode` and confirm the prompt.

Now we can continue to fix the signing and versioning stuff:

```
code signing stuff
```

Now on to the real lane:

first certificates, then get, increase and write a build number, then build the project and finally upload it to testflight.

### Android to ?? (Hockey? Play Store?)

TODO